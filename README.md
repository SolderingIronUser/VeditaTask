# VeditaTask

1. Создем два таблицы в БД: пользователи (users) и роли (roles).

В таблице пользователей заводим колонки:
- id / число идентификатор
- login / строка логин
- password / строка хеш от пароля
- role / число идентификатор роли
- last_login / дата последней авторизации

В таблице ролей создаем колонки:
- id  / число идентификатор
- name / строка название роли
- code / строка транслит от названия роли

2. В таблице ролей сразу
создаем две роли:
- админ
- юзер

3. Создаем страницу с формой авторизации. index.php
На странице фома для ввода логина и пароля.
Форма не должна отправляться если логин или пароль не заполнены.

4. Сама авторизация:
проверяем что существет пользователь с таким логином и таким хешем от пароля.
В Бд храним не сам пароль, а хеш от пароля. Хеш получить можно через md5.
Если пользователь существует - получаем роль пользователя.
Если роль не задана - показывамем ошибку.

Если роль задана:
1) сохраняем идентификатор пользователя в куках или в php сесии. Записываем в поле last_login в таблице пользвателей дату и время авторизации.
2) проверяем роль. Если обычный пользователь, то просто перенаправляем на страницу main.php
3) если пользователь администратор - перенаправляем на страницу admin.php

5. Страница main.php
Страница проверяет авторизован пользователь или нет.
Если не авторизован - перекидываем на страницу index.php

Если авторизован: показываем текст "добро пожаловать" и кнопку "выйти"
По нажати на кнопку "выйти", пользователя перекидывает на страницу deauth.php

6. Разлогинивание deauth.php
На странице ничего отображать не нужно. Здесь стираем куку (или php-сессию)  с id пользователя.
После этого перекидываем на index.php

7. Страница admin.php
Страница проверяет авторизован пользователь или нет.
Если не авторизован - перекидываем на страницу index.php

Если авторизован:
На странице находится форма, которая позволяет добавить нового пользователя.
В форме выводится:
- инпут для логина
- инпут для пароля
- select для выбора роли. Селект формируется из таблицы ролей.

При отправке формы, создаем запись в таблице пользователей.


Можно использовать js, jquery, vue, php.
Насчет использования остальных языков и библиотек необходимо уточнить у постановщика задания.
------------------------------------------------------------------------------------------------------------

Входной файл index.php.
В папке control, лежат php обработчики запросов ajax, в users формы страниц admin и main.




 index:
 
 ![image](https://user-images.githubusercontent.com/85685236/152067306-e23cbf33-d5e2-4836-8cf4-a08fbe76d8a3.png)
 
 
 admin:
 
 ![image](https://user-images.githubusercontent.com/85685236/152067400-d287bf3b-4686-4bec-8848-e02176c28d03.png)
 
 
  main:
  
  ![image](https://user-images.githubusercontent.com/85685236/152067438-41b8a4d3-4752-42f1-a046-11944807d959.png)



